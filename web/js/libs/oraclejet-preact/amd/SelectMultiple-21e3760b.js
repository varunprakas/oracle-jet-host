function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,s=new Array(n);t<n;t++)s[t]=e[t];return s}define(["exports","preact/jsx-runtime","preact","preact/compat","./hooks/UNSAFE_useFocusableTextField","./hooks/UNSAFE_useFormContext","./hooks/UNSAFE_useFormFieldContext","./hooks/UNSAFE_useLoadingIndicatorTimer","./hooks/UNSAFE_useTextField","./UNSAFE_Flex","./UNSAFE_Label","./UNSAFE_LiveRegion","./UNSAFE_TextField","./UNSAFE_UserAssistance","./utils/PRIVATE_clientHints","preact/hooks",'module',"./UNSAFE_HighlightText","./UNSAFE_ListView","./utils/UNSAFE_logger","./HighlightText-918515b5","./ListView-6139b20b","./UNSAFE_Floating","./UNSAFE_Layer","./hooks/UNSAFE_useOutsideClick","./hooks/UNSAFE_usePress","./utils/UNSAFE_classNames","./classNames-73af7744","./tslib.es6-5322d4a4","./UNSAFE_Chip","./hooks/UNSAFE_useTranslationBundle","./Chip-28bd0e30","./TextFieldInput-a8516ac9","./Flex-155c2aac","./clientHints-4675dd55"],(function(e,n,t,s,o,a,l,i,r,c,u,d,v,b,f,p,h,y,g,m,x,S,T,A,F,w,E,C,L,j,_,R,D,k,O){"use strict";function U(e,n){var t;return"string"==typeof n?(null===(t=e.data)||void 0===t?void 0:t.hasOwnProperty(n))?e.data[n]:void m.Logger.error("SelectMultiple: itemText specifies field that does not exist: "+n):n(e)}const I=()=>{};function P({accessibleSummary:e,currentKey:t,data:s,itemText:o,onCurrentKeyChange:a,onLoadRange:l=I,onSelectionChange:i,searchText:r,selectedKeys:c}){const u=p.useCallback((e=>{const t=U({data:e.data,key:e.metadata.key,metadata:e.metadata},o);return n.jsx("div",Object.assign({class:"idd6a1a"},{children:n.jsx(x.HighlightText,Object.assign({matchText:r},{children:t}))}))}),[o,r]);return n.jsx(S.ListView,Object.assign({accessibleSummary:e,currentKey:t,data:null!=s?s:null,gridlines:"hidden",onCurrentKeyChange:a,onLoadRange:l,onSelectionChange:i,selectedKeys:{all:!1,keys:null!=c?c:new Set},selectionMode:"multiple"},{children:e=>u(e)}))}const K={TAB:"Tab",ENTER:"Enter",ESC:"Escape",SPACE:"Space",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",SHIFT_LEFT:"ShiftLeft",SHIFT_RIGHT:"ShiftRight",CTRL_LEFT:"ControlLeft",CTRL_RIGHT:"ControlRight",ALT_LEFT:"AltLeft",ALT_RIGHT:"AltRight",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",HOME:"Home",END:"End",BACKSPACE:"Backspace",DELETE:"Delete"},N=e=>(e=>{switch(e.code){case K.SHIFT_LEFT:case K.SHIFT_RIGHT:case K.CTRL_LEFT:case K.CTRL_RIGHT:case K.ALT_LEFT:case K.ALT_RIGHT:return!0;default:return e.metaKey||e.ctrlKey}})(e)||(e=>/\bF([1-9]|1[0-2])\b/i.test(e.code))(e),H="b1x3qtg";function M({anchorRef:e,children:t,dropdownRef:s,id:o,isOpen:a,onAutoDismiss:l}){var i;const r=p.useCallback((e=>{null==l||l(e)}),[l]),c=p.useCallback((e=>{if(!e.defaultPrevented&&!N(e))switch(e.code){case K.ESC:case K.TAB:r(e)}}),[r]);F.default({isDisabled:!a,ref:[e,s],handler:r});const u={minWidth:`${null===(i=e.current)||void 0===i?void 0:i.offsetWidth}px`};return a?n.jsx(A.Layer,{children:n.jsx(T.Floating,Object.assign({anchorRef:e,ref:s,placement:"bottom-start",offsetValue:{mainAxis:4,crossAxis:0}},{children:n.jsx("div",Object.assign({class:H,id:o,style:u,onKeyDown:c},{children:t}))}))}):null}const V="bd2dc79",z="s15qor59",W="s12pbwsa",B="e1yzq7zc",$="d13seyx8",G=()=>{};function q({isDisabled:e=!1,onClick:t,size:s="md"}){const o=p.useCallback((e=>{e.preventDefault()}),[]),{pressProps:a}=w.usePress(null!=t?t:G,{isDisabled:e}),l=C.classNames([V,"sm"===s?W:z,e?$:B]);return n.jsx("span",Object.assign({"aria-hidden":"true",class:l,tabIndex:-1,onMouseDown:o},a,{children:n.jsx("svg",Object.assign({height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},{children:n.jsx("path",{d:"m6.00803369 8.9999991c3.96646621 4 5.94968971 6 5.94967061 6-.0000192 0 1.9832044-2 5.9496706-6z",fill:"currentColor","fill-rule":"evenodd"})}))}))}const Z="b4ys03i",Y="lchlgjc",J="l6rxyq0";function Q({children:e,isLoading:t=!1}){const s=C.classNames([Z,Y,t&&J]);return n.jsx("div",Object.assign({class:s},{children:e}))}function X(e){var{accessibleLabel:t,count:s=0,onKeyDown:o,onKeyUp:a,onMouseDown:l}=e,i=L.__rest(e,["accessibleLabel","count","onKeyDown","onKeyUp","onMouseDown"]);const r=_.useTranslationBundle("@oracle/oraclejet-preact"),c=r.selectMultiple_showSelectedValues(),u=t?`${t}. `:"",d=r.selectMultiple_countPlus({COUNT:"99"}),v=s>99?`${d}`:`${s}`,b=`${u}${r.selectMultiple_valuesSelected({VALUE_COUNT:`${s}`})} ${c}`;return n.jsx("div",Object.assign({class:"r1onwb12",onKeyDown:o,onKeyUp:a,onMouseDown:l},{children:n.jsx(R.Chip,Object.assign({accessibleLabel:b},i,{children:v}))}))}function ee(e,n){return p.useMemo((()=>{if(!n)return"";const t=function(e,n){const t=n?_toConsumableArray(null==n?void 0:n.values()):[],s=n=>U(n,e),o=t.map(s);return new Set(o)}(e,n),s=function(e){return Array.from(e.values()).join(", ")}(t);return s}),[n,e])}function ne({data:e,inputRef:n,isDisabled:t,isFocused:s,isReadonly:o,onCommit:a,onFilter:l,onLoadRange:i,valueItems:r}){const c=p.useRef(null),u=p.useRef(null),[d,v]=p.useState(!1),[b,f]=p.useState(!1),[h,y]=p.useState({rowKey:void 0}),[g,m]=p.useState(),[x,S]=p.useState(!1),[T,A]=p.useState(),[F,w]=p.useState(),E=null==r?void 0:r.length,C=void 0!==E&&E>0||b;p.useEffect((()=>{const e=null==r?void 0:r.reduce(((e,n)=>(e.add(n.key),e)),new Set);m(e)}),[r]);const L=p.useRef(null);p.useEffect((()=>{L.current=C&&c.current?c.current.querySelector('[tabindex="0"]'):null}),[C,t,o]);const j=function({isDropdownSelectedOnlyView:e,valueItems:n}){return{data:p.useMemo((()=>{var t;return e&&n&&0!==n.length?{offset:0,totalSize:null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0,sizePrecision:"exact",data:n.map((e=>{var n;return{data:e.data,metadata:null!==(n=e.metadata)&&void 0!==n?n:{key:e.key}}}))}:void 0}),[e]),onLoadRange:void 0}}({isDropdownSelectedOnlyView:b,valueItems:r}),_=b?j.data:e,R=b?j.onLoadRange:i,D=p.useCallback((e=>{!e.defaultPrevented&&(e=>0===e.button&&!e.ctrlKey)(e)&&(d||v(!0),setTimeout((function(){var e;null===(e=n.current)||void 0===e||e.focus()}),0))}),[d,v]),k=p.useCallback((()=>{var e;v(!d),null===(e=n.current)||void 0===e||e.focus()}),[d]),O=p.useCallback((e=>{var t,s,o;if(d&&(v(!1),"keydown"===(null==e?void 0:e.type))){const a=e;switch(a.code){case K.ESC:null===(t=n.current)||void 0===t||t.focus();break;case K.TAB:a.shiftKey||!C?null===(s=n.current)||void 0===s||s.focus():null===(o=L.current)||void 0===o||o.focus()}}}),[C,d]),U=p.useCallback((e=>{var n,t,s,o;if(d){const e=null===(n=u.current)||void 0===n?void 0:n.querySelector('[tabindex="0"]');null==e||e.focus(),void 0!==_&&void 0===h.rowKey&&y({rowKey:null===(o=null===(s=null===(t=null==_?void 0:_.data)||void 0===t?void 0:t[0])||void 0===s?void 0:s.metadata)||void 0===o?void 0:o.key})}else v(!0);e.preventDefault()}),[h,_,d]),I=p.useCallback((e=>{if(!N(e))switch(e.code){case K.PAGE_UP:case K.PAGE_DOWN:return void e.preventDefault();case K.UP:case K.DOWN:e.preventDefault();break;case K.TAB:d&&(e.shiftKey||!C&&!e.shiftKey)&&v(!1);break;case K.ESC:d&&(v(!1),e.preventDefault())}}),[C,d]),P=p.useCallback((e=>{if(!N(e))switch(e.code){case K.UP:case K.DOWN:U(e)}}),[U]),H=p.useCallback((e=>{var n;d||v(!0),S(!0),A(e.value);const t=null===(n=e.value)||void 0===n?void 0:n.trim();w(t),null==l||l({searchText:t})}),[d,l]),M=p.useCallback((e=>{switch(e.code){case K.TAB:d&&!e.shiftKey&&v(!1);break;case K.UP:case K.DOWN:e.preventDefault();break;case K.ESC:d&&(v(!1),e.preventDefault())}}),[d]),V=p.useCallback((e=>{switch(e.code){case K.UP:case K.DOWN:U(e)}}),[U]),z=p.useCallback((e=>{var t;e.preventDefault(),null===(t=n.current)||void 0===t||t.focus()}),[]),W=p.useCallback((e=>{var n;d||v(!0);const t=null!==(n=e.value)&&void 0!==n&&n;t!==b&&f(t)}),[d,b]);p.useEffect((()=>{!d&&b&&f(!1)}),[d,b]);const B=p.useCallback((e=>{const n=e.value.keys;m(n),null==a||a({value:n,previousValue:g})}),[a,g]),$=p.useCallback((e=>{y({rowKey:e.value})}),[]);return p.useEffect((()=>{d&&y({rowKey:void 0})}),[d]),p.useEffect((()=>{d||s||!x||(S(!1),A(""),w(""))}),[d,s,x]),p.useEffect((()=>{d&&!x&&(null==l||l({searchText:void 0}))}),[d,x]),{collectionProps:{currentKey:h.rowKey,onCurrentKeyChange:$,onSelectionChange:B,selectedKeys:g},data:_,dropdownArrowEventHandlers:{onClick:k},dropdownEventHandlers:{onAutoDismiss:O},dropdownRef:u,hasSelectedValuesCount:C,inputEventHandlers:{onInput:H,onKeyDown:I,onKeyUp:P},inputRef:n,isDropdownOpen:d,isDropdownSelectedOnlyView:b,isFocused:s||d,isUserFiltering:x,mainFieldRef:c,mouseProps:t||o?{}:{onMouseDown:D},onLoadRange:R,searchText:F,selectedValuesCountProps:{onKeyDown:M,onKeyUp:V,onMouseDown:z,onToggle:W},userInput:T}}const te=s.forwardRef((({assistiveText:e,data:s,helpSourceLink:c,helpSourceText:f,id:p,isDisabled:h,isLoading:y,isReadonly:g,isRequired:m=!1,isRequiredShown:x,itemText:S,label:T,labelEdge:A,labelStartWidth:F,messages:w,onCommit:E,onFilter:C,onLoadRange:L,placeholder:j,textAlign:R,userAssistanceDensity:O,valueItems:U,virtualKeyboard:I},K)=>{const{isDisabled:N,isReadonly:H,labelEdge:V,labelStartWidth:z,textAlign:W,userAssistanceDensity:B}=a.useFormContext(),$=null!=h?h:N,G=null!=g?g:H,Z=null!=A?A:V,Y=null!=F?F:z,J=null!=R?R:W,te=null!=O?O:B,{enabledElementRef:oe,focusProps:ae,isFocused:le,readonlyElementRef:ie}=o.useFocusableTextField({isDisabled:$,isReadonly:G,ref:K}),{collectionProps:re,data:ce,dropdownArrowEventHandlers:ue,dropdownEventHandlers:de,dropdownRef:ve,hasSelectedValuesCount:be,inputEventHandlers:fe,isDropdownOpen:pe,isDropdownSelectedOnlyView:he,isFocused:ye,isUserFiltering:ge,mainFieldRef:me,mouseProps:xe,onLoadRange:Se,searchText:Te,selectedValuesCountProps:Ae,userInput:Fe}=ne({data:s,inputRef:oe,isDisabled:$,isFocused:le,isReadonly:G,onCommit:E,onFilter:C,onLoadRange:L,valueItems:U}),we=i.useLoadingIndicatorTimer(null!=y&&y),{baseId:Ee,formFieldContext:Ce,inputProps:Le,labelProps:je,textFieldProps:_e,userAssistanceProps:Re}=r.useTextField({id:p,isDisabled:$,isFocused:ye,isLoading:we,isReadonly:G,labelEdge:Z,messages:w,value:void 0!==U&&U.length>0||void 0}),De=`${Ee}-dropdown`,ke=ee(S,U),Oe="none"!==Z?n.jsx(u.Label,Object.assign({},je,{children:T})):void 0,Ue={label:"none"!==Z?Oe:void 0,labelEdge:"none"!==Z?Z:void 0,labelStartWidth:"none"!==Z?Y:void 0},Ie="none"===Z?T:void 0,Pe=$||G?"efficient"!==te?void 0:n.jsx(b.InlineUserAssistance,Object.assign({userAssistanceDensity:te},Re)):n.jsx(b.InlineUserAssistance,Object.assign({assistiveText:e,helpSourceLink:c,helpSourceText:f,messages:w,isRequiredShown:x,userAssistanceDensity:te},Re));if(G)return n.jsx(l.FormFieldContext.Provider,Object.assign({value:Ce},{children:n.jsx(v.ReadonlyTextField,Object.assign({role:"presentation",inlineUserAssistance:Pe,onBlur:ae.onfocusout,onFocus:ae.onfocusin},Ue,{children:n.jsx(v.ReadonlyTextFieldInput,{ariaLabel:Ie,ariaLabelledby:je.id,as:"div",elementRef:ie,hasInsideLabel:void 0!==T&&"inside"===Z,id:_e.id,textAlign:J,value:ke})}))}));const Ke=void 0!==Oe&&"inside"===Z,Ne=_.useTranslationBundle("@oracle/oraclejet-preact"),He=pe&&null!=ce?0===(null==ce?void 0:ce.totalSize)?Ne.select_noMatchesFound():1===(null==ce?void 0:ce.totalSize)?Ne.select_oneMatchFound():"exact"===(null==ce?void 0:ce.sizePrecision)?Ne.select_sizeMatchesFound({TOTAL_SIZE:`${null==ce?void 0:ce.totalSize}`}):Ne.select_sizeOrMoreMatchesFound({TOTAL_SIZE:`${null==ce?void 0:ce.totalSize}`}):"",Me=n.jsxs(t.Fragment,{children:[n.jsx(D.TextFieldInput,Object.assign({ariaAutocomplete:"list",ariaControls:De,ariaExpanded:pe,ariaLabel:Ie,autoComplete:"off",hasInsideLabel:Ke,inputRef:oe,isRequired:m},fe,{placeholder:j,role:"combobox",spellcheck:!1,textAlign:J,type:se()?I:void 0,value:ge?Fe:ke},Le)),n.jsx(d.LiveRegion,{children:He})]}),Ve=n.jsx(q,Object.assign({isDisabled:$,size:Ke?"md":"sm"},ue)),ze=null==U?void 0:U.length,We=we?void 0:be?n.jsxs(k.Flex,Object.assign({align:"center",justify:"center",gap:[0,"1x"]},{children:[n.jsx(X,Object.assign({accessibleLabel:T,count:ze,isDisabled:$,isSelected:he},Ae)),Ve]})):Ve;return n.jsxs(t.Fragment,{children:[n.jsx(l.FormFieldContext.Provider,Object.assign({value:Ce},{children:n.jsx(v.TextField,Object.assign({endContent:We,inlineUserAssistance:Pe,mainContent:Me,mainFieldRef:me,onBlur:null==ae?void 0:ae.onfocusout,onFocus:null==ae?void 0:ae.onfocusin},_e,Ue,xe))})),n.jsx(M,Object.assign({dropdownRef:ve,id:De,isOpen:pe&&void 0!==ce&&(null===ce||ce.totalSize>0),anchorRef:me},de,{children:n.jsx(Q,Object.assign({isLoading:null===ce},{children:n.jsx(P,Object.assign({},re,{accessibleSummary:null!=T?T:"",data:ce,itemText:S,onLoadRange:Se,searchText:he?void 0:ge?Te:void 0}))}))}))]})}));function se(){const e=O.getClientHints().deviceType;return"phone"===e||"tablet"===e}e.KEYS=K,e.SelectMultiple=te}));
//# sourceMappingURL=SelectMultiple-21e3760b.js.map
